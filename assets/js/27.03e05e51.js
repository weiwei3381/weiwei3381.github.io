(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{391:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react17-react-hook-ts4-最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react17-react-hook-ts4-最佳实践"}},[t._v("#")]),t._v(" React17+React Hook+TS4 最佳实践")]),t._v(" "),a("p",[t._v("初始化项目："),a("code",[t._v("npx create-react-app jira --template typescript")])]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("tsconfig.json")]),t._v("中配置"),a("code",[t._v("baseUrl")]),t._v("就可以解决相对路径的问题")]),t._v(" "),a("p",[t._v("使用"),a("a",{attrs:{href:"https://prettier.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("prettier"),a("OutboundLink")],1),t._v("进行代码格式化统一，使用"),a("code",[t._v("npm install --save-dev --save-exact prettier")]),t._v("安装依赖，在项目根目录使用"),a("code",[t._v(".prettierrc.json")]),t._v("进行配置，使用"),a("code",[t._v(".prettierignore")]),t._v("文件配置不需要格式化的文件，但是默认prettier是手动格式化的，可以借助"),a("a",{attrs:{href:"https://prettier.io/docs/en/precommit.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pre-commit Hook"),a("OutboundLink")],1),t._v("进行自动格式化，然后再配置ESLint，因为prettier与ESLint有冲突")]),t._v(" "),a("p",[a("strong",[t._v("规范git提交")]),t._v("：使用commitlint规范git提交。")]),t._v(" "),a("p",[a("strong",[t._v("mook方案")]),t._v("：1. mock.js进行请求拦截，只支持ajax，不支持fetch。2. 接口管理工具，例如swagger，moco，yapi，rap，工具强大，配置复杂；3.json-server，配置简单，自定义高，无法自定义改api文档。")]),t._v(" "),a("p",[t._v("在开发和生产环境使用不同变量："),a("code",[t._v(".env")]),t._v("是生产环境变量，"),a("code",[t._v(".env.development")]),t._v("是开发环境变量，在代码中使用"),a("code",[t._v("process.env.[变量名]")]),t._v("使用，在"),a("code",[t._v("npm start")]),t._v("时候使用开发环境，当"),a("code",[t._v("npm build")]),t._v("时使用生产环境")]),t._v(" "),a("p",[a("strong",[t._v("RestAPI")]),t._v("：GET是查询，POST是增加，PUT是替换（全量替换），PATCH是修改（修改一部分）")]),t._v(" "),a("p",[t._v("符号"),a("code",[t._v("?.")]),t._v("，使用"),a("code",[t._v("[表达式].[属性]")]),t._v("时，如果表达式是undifined，这个代码会报错，可以将其改为"),a("code",[t._v("[表达式]?.[属性]")]),t._v("就不会报错了")]),t._v(" "),a("p",[t._v("使用模块"),a("code",[t._v("qs")]),t._v("，可以将一个对象转换成为url中的参数形式")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("!!变量")]),t._v("可以将任意变量转换为布尔值，"),a("code",[t._v("变量*1")]),t._v("可以将string型数字转为数值型")]),t._v(" "),a("p",[t._v("在onchange事件中，会碰到输入一个汉字，提交很多个拼音的问题，类似下图这样。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ftp.bmp.ovh/imgs/2021/09/8a4fee45f72d7b3d.png",alt:"提交很多个拼音的问题"}})]),t._v(" "),a("p",[t._v("解决办法是使用类似于"),a("code",[t._v("debounce")]),t._v("函数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("debounce")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" delay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" delay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Typescript中不常见的数据类型，"),a("strong",[t._v("tuple")]),t._v("是“数量固定，类型可以各不相同”的数组，"),a("strong",[t._v("array")]),t._v("中的变量类型必须一致。unknown是严格版本的"),a("strong",[t._v("any")]),t._v("，可以代替any。ts在很多情况下帮我们自动推断类型，所以有些情况下不需要声明类型。")])])}),[],!1,null,null,null);s.default=e.exports}}]);